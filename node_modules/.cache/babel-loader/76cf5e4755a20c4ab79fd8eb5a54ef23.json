{"ast":null,"code":"import _classCallCheck from \"/Users/manuel/digipost/Pers_repos/stories_viewer/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/manuel/digipost/Pers_repos/stories_viewer/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/manuel/digipost/Pers_repos/stories_viewer/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/manuel/digipost/Pers_repos/stories_viewer/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/manuel/digipost/Pers_repos/stories_viewer/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/manuel/digipost/Pers_repos/stories_viewer/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/manuel/digipost/Pers_repos/stories_viewer/src/containers/details-view.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Parser from 'html-react-parser';\nimport { Link } from 'react-router-dom';\nimport { fetchFirstComments as _fetchFirstComments, fetchDataComments as _fetchDataComments } from '../actions/comments';\nimport loading_icon from '../assets/loading.webp';\nimport PageHeader from '../components/page-header';\nimport '../styles/DetailsView.css';\n\nvar DetailsView =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(DetailsView, _Component);\n\n  function DetailsView(props) {\n    var _this;\n\n    _classCallCheck(this, DetailsView);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DetailsView).call(this, props));\n    _this.state = {\n      story: null\n    };\n    _this.renderComments = _this.renderComments.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.setSessionStorage = _this.setSessionStorage.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(DetailsView, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var story = this.props.location.state.story;\n      this.setState({\n        story: story\n      });\n      this.props.fetchFirstComments(story.id);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (prevProps.comments !== this.props.comments && this.props.comments) {\n        this.props.fetchDataComments(this.props.comments);\n      }\n    }\n  }, {\n    key: \"setSessionStorage\",\n    value: function setSessionStorage(val) {\n      sessionStorage.setItem('initiated', val);\n    }\n  }, {\n    key: \"renderComments\",\n    value: function renderComments() {\n      if (this.props.hasError) {\n        return React.createElement(\"p\", {\n          className: \"error-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 40\n          },\n          __self: this\n        }, \"Sorry!!! There was an error loading the items\");\n      }\n\n      if (this.props.isLoading) {\n        return React.createElement(\"div\", {\n          className: \"loading-main-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"loading-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        }, \"Loading Comments\\u2026\"), React.createElement(\"img\", {\n          src: loading_icon,\n          alt: \"loading\",\n          className: \"loading-icon\",\n          width: \"85px\",\n          height: \"85px\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }));\n      }\n\n      return this.props.fullComments.map(function (fullComment) {\n        var html = \"<div>\".concat(fullComment.text, \"</div>\");\n        return React.createElement(\"div\", {\n          className: \"comment-main-container\",\n          key: fullComment.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"comment-headings\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"comment-heading-box\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"comment-heading\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, \"By:\"), React.createElement(\"div\", {\n          className: \"comment-heading-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, fullComment.author)), React.createElement(\"div\", {\n          className: \"comment-heading-box\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"comment-heading\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, \"Author comments:\"), React.createElement(\"div\", {\n          className: \"comment-heading-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, fullComment.authorComments)), React.createElement(\"div\", {\n          className: \"comment-heading-box\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"comment-heading\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, \"Created:\"), React.createElement(\"div\", {\n          className: \"comment-heading-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, fullComment.date, \" \"))), React.createElement(\"div\", {\n          className: \"comment-heading\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, \"Comment:\"), React.createElement(\"div\", {\n          className: \"comment-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, Parser(html)));\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var story = this.state.story;\n\n      if (story !== null) {\n        return React.createElement(\"div\", {\n          className: \"main-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, React.createElement(PageHeader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"main-story-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"story-line\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"story-cell\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, \"Title:\", React.createElement(\"div\", {\n          className: \"story-cell-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, story.title)), React.createElement(\"div\", {\n          className: \"story-cell\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, \"Date:\", React.createElement(\"div\", {\n          className: \"story-cell-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, story.time))), React.createElement(\"div\", {\n          className: \"story-line\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"story-cell\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, \"Author:\", React.createElement(\"div\", {\n          className: \"story-cell-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, story.author)), React.createElement(\"div\", {\n          className: \"story-cell\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }, \"Author's Karma:\", React.createElement(\"div\", {\n          className: \"story-cell-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, story.karma))), React.createElement(\"div\", {\n          className: \"story-line\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"story-cell\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, \"Score:\", React.createElement(\"div\", {\n          className: \"story-cell-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, story.score)), React.createElement(\"div\", {\n          className: \"story-cell\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, \"Link:\", React.createElement(\"a\", {\n          href: story.url,\n          target: \"_blank\",\n          className: \"story-cell-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, \"url\"))), React.createElement(\"div\", {\n          className: \"comments-main-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"comments-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, \" Comments: \"), this.renderComments())), React.createElement(Link, {\n          className: \"details-buttons-container\",\n          to: \"/\",\n          onClick: function onClick() {\n            return _this2.setSessionStorage(true);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"button-back\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }, \"< Back to stories\")));\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return DetailsView;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    comments: state.comments,\n    fullComments: state.fullComments,\n    hasError: state.commentsHaveError,\n    isLoading: state.commentsAreLoading\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    fetchFirstComments: function fetchFirstComments(id) {\n      return dispatch(_fetchFirstComments(id));\n    },\n    fetchDataComments: function fetchDataComments(comments) {\n      return dispatch(_fetchDataComments(comments));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DetailsView);","map":{"version":3,"sources":["/Users/manuel/digipost/Pers_repos/stories_viewer/src/containers/details-view.js"],"names":["React","Component","connect","Parser","Link","fetchFirstComments","fetchDataComments","loading_icon","PageHeader","DetailsView","props","state","story","renderComments","bind","setSessionStorage","location","setState","id","prevProps","prevState","comments","val","sessionStorage","setItem","hasError","isLoading","fullComments","map","fullComment","html","text","author","authorComments","date","title","time","karma","score","url","mapStateToProps","commentsHaveError","commentsAreLoading","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Parser from 'html-react-parser';\nimport { Link } from 'react-router-dom';\nimport { fetchFirstComments, fetchDataComments } from '../actions/comments';\nimport loading_icon from '../assets/loading.webp';\nimport PageHeader from '../components/page-header';\n\nimport '../styles/DetailsView.css';\n\nclass DetailsView extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            story: null,\n        };\n        this.renderComments = this.renderComments.bind(this);\n        this.setSessionStorage = this.setSessionStorage.bind(this);\n    }\n\n    componentDidMount() {\n        const { story } = this.props.location.state;\n        this.setState({ story });\n        this.props.fetchFirstComments(story.id);\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevProps.comments !== this.props.comments && this.props.comments) {\n            this.props.fetchDataComments(this.props.comments);\n        }\n    }\n\n    setSessionStorage(val) {\n        sessionStorage.setItem('initiated', val);\n    }\n\n    renderComments() {\n        if (this.props.hasError) {\n            return (\n                <p className='error-text'>Sorry!!! There was an error loading the items</p>\n            )\n        }\n        if (this.props.isLoading) {\n            return (\n                <div className='loading-main-container'>\n                    <p className='loading-text'>Loading Commentsâ€¦</p>\n                    <img src={loading_icon} alt='loading' className='loading-icon' width='85px' height='85px' />\n                </div>\n            )\n        }\n        return (\n            this.props.fullComments.map((fullComment) => {\n                const html = `<div>${fullComment.text}</div>`;\n                return (\n                    <div className='comment-main-container' key={fullComment.id}>\n                        <div className='comment-headings'>\n                            <div className='comment-heading-box'>\n                                <div className='comment-heading' >By:</div>\n                                <div className='comment-heading-content'>{fullComment.author}</div>\n                            </div>\n                            <div className='comment-heading-box'>\n                                <div className='comment-heading' >Author comments:</div >\n                                <div className='comment-heading-content' >{fullComment.authorComments}</div>\n                            </div>\n                            <div className='comment-heading-box'>\n                                <div className='comment-heading' >Created:</div >\n                                <div className='comment-heading-content' >{fullComment.date} </div>\n                            </div>\n                        </div>\n                        <div className='comment-heading' >Comment:</div>\n                        <div className='comment-content' >\n                            {Parser(html)}\n                        </div>\n                    </div>\n                );\n            })\n        );\n    }\n\n    render() {\n        const story = this.state.story;\n\n        if (story !== null) {\n            return (\n                <div className='main-container'>\n                    <PageHeader />\n\n                    <div className='main-story-container'>\n                        <div className='story-line'>\n                            <div className='story-cell'>Title:\n                                <div className='story-cell-content'>{story.title}</div>\n                            </div>\n                            <div className='story-cell'>Date:\n                                <div className='story-cell-content'>{story.time}</div>\n                            </div>\n\n                        </div>\n                        <div className='story-line'>\n                            <div className='story-cell'>Author:\n                                <div className='story-cell-content'>{story.author}</div>\n                            </div>\n                            <div className='story-cell'>Author's Karma:\n                                <div className='story-cell-content'>{story.karma}</div>\n                            </div>\n                        </div>\n                        <div className='story-line'>\n                            <div className='story-cell'>Score:\n                                <div className='story-cell-content'>{story.score}</div>\n                            </div>\n                            <div className='story-cell'>Link:\n                                <a href={story.url} target=\"_blank\" className='story-cell-content'>url</a>\n                            </div>\n                        </div>\n                        <div className='comments-main-container'>\n                            <div className='comments-title'> Comments: </div>\n                            {this.renderComments()}\n                        </div>\n                    </div>\n\n                    <Link\n                        className='details-buttons-container'\n                        to='/'\n                        onClick={() => this.setSessionStorage(true)}\n                    >\n                        <button className='button-back'>\n                            &#60;\n                            Back to stories\n                        </button>\n                    </Link>\n                </div >\n            );\n        }\n        return (\n            <div></div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        comments: state.comments,\n        fullComments: state.fullComments,\n        hasError: state.commentsHaveError,\n        isLoading: state.commentsAreLoading\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        fetchFirstComments: (id) => dispatch(fetchFirstComments(id)),\n        fetchDataComments: (comments) => dispatch(fetchDataComments(comments))\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DetailsView);"]},"metadata":{},"sourceType":"module"}