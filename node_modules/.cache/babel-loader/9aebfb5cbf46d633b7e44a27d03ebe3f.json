{"ast":null,"code":"import _classCallCheck from \"/Users/manuel/digipost/Pers_repos/stories_viewer/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/manuel/digipost/Pers_repos/stories_viewer/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/manuel/digipost/Pers_repos/stories_viewer/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/manuel/digipost/Pers_repos/stories_viewer/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/manuel/digipost/Pers_repos/stories_viewer/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/manuel/digipost/Pers_repos/stories_viewer/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/manuel/digipost/Pers_repos/stories_viewer/src/containers/stories-table.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchDataTopStories as _fetchDataTopStories } from '../actions/stories';\nimport { Link } from 'react-router-dom';\nimport loading_icon from '../assets/loading.webp';\nimport '../styles/StoriesTable.css';\n\nvar StoriesTable =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(StoriesTable, _Component);\n\n  function StoriesTable(props) {\n    var _this;\n\n    _classCallCheck(this, StoriesTable);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(StoriesTable).call(this, props));\n    _this.state = {\n      isLoading: true,\n      storiesToShow: _this.props.stories,\n      orderedStories: []\n    };\n    _this.bubbleSort = _this.bubbleSort.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.renderStories = _this.renderStories.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(StoriesTable, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var orderedStories = sessionStorage.getItem('orderedStories');\n      var unorderedStories = sessionStorage.getItem('unorderedStories');\n\n      if (orderedStories !== null) {\n        var recordedOrderedStories = JSON.parse(orderedStories);\n        var recordedUnorderedStories = JSON.parse(unorderedStories);\n        this.setState({\n          isLoading: false,\n          storiesToShow: recordedUnorderedStories,\n          orderedStories: recordedOrderedStories\n        });\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (prevProps.stories !== this.props.stories && this.props.stories) {\n        this.props.fetchDataTopStories(this.props.stories);\n      }\n\n      if (prevProps.selectedStories !== this.props.selectedStories && this.props.selectedStories) {\n        this.setState({\n          storiesToShow: this.props.selectedStories\n        });\n      }\n\n      if (prevState.storiesToShow !== this.state.storiesToShow) {\n        var unorderedStories = this.state.storiesToShow.slice(0);\n        var orderedStories = this.bubbleSort(unorderedStories);\n        sessionStorage.setItem('unorderedStories', JSON.stringify(this.state.storiesToShow));\n        sessionStorage.setItem('orderedStories', JSON.stringify(orderedStories));\n        this.setState({\n          orderedStories: orderedStories\n        });\n      }\n    }\n  }, {\n    key: \"bubbleSort\",\n    value: function bubbleSort(unsortedArray) {\n      var swapp;\n      var n = unsortedArray.length - 1;\n      var x = unsortedArray;\n\n      do {\n        swapp = false;\n\n        for (var i = 0; i < n; i++) {\n          if (x[i].score < x[i + 1].score) {\n            var temp = x[i];\n            x[i] = x[i + 1];\n            x[i + 1] = temp;\n            swapp = true;\n          }\n        }\n\n        n--;\n      } while (swapp);\n\n      return x;\n    }\n  }, {\n    key: \"renderStories\",\n    value: function renderStories() {\n      var stories = this.state.orderedStories;\n      return stories.map(function (story) {\n        return React.createElement(\"tr\", {\n          key: story.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          className: \"table-story-cell table-story-cell-name\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, story.title), React.createElement(\"td\", {\n          className: \"table-story-cell\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, story.score), React.createElement(\"td\", {\n          className: \"table-story-cell\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, story.author), React.createElement(\"td\", {\n          className: \"table-story-cell\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, story.karma), React.createElement(\"td\", {\n          className: \"table-story-cell\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, story.time), React.createElement(\"td\", {\n          className: \"table-story-cell\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, React.createElement(Link, {\n          className: \"main-buttons-container\",\n          to: {\n            pathname: '/details',\n            state: {\n              story: story\n            }\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"button button-details\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, \"details\", React.createElement(\"i\", {\n          className: \"right-arrow\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, \">\")))));\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.props.hasError) {\n        return React.createElement(\"p\", {\n          className: \"error-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, \"Sorry!!! There was an error loading the items\");\n      }\n\n      if (this.props.isLoading) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: loading_icon,\n          alt: \"loading\",\n          width: \"85px\",\n          height: \"85px\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          className: \"loading-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, \"Loading\\u2026\"));\n      }\n\n      return React.createElement(\"div\", {\n        className: \"stories-main-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        className: \"table-container\",\n        cellSpacing: \"0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        className: \"table-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        className: \"header-cell\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Title\"), React.createElement(\"th\", {\n        className: \"header-cell\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"Score\"), React.createElement(\"th\", {\n        className: \"header-cell\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"Author\"), React.createElement(\"th\", {\n        className: \"header-cell\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Author\\xB4s Karma\"), React.createElement(\"th\", {\n        className: \"header-cell\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Date\"), React.createElement(\"th\", {\n        className: \"header-cell\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Go to\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, this.renderStories())), React.createElement(Link, {\n        className: \"main-buttons-container\",\n        to: {\n          pathname: '/chart',\n          state: {\n            stories: this.state.storiesToShow\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"button button-chart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"Show chart\")));\n    }\n  }]);\n\n  return StoriesTable;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    stories: state.stories,\n    selectedStories: state.topStories,\n    hasError: state.storiesHaveError,\n    isLoading: state.storiesAreLoading\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    fetchDataTopStories: function fetchDataTopStories(stories) {\n      return dispatch(_fetchDataTopStories(stories));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StoriesTable);","map":{"version":3,"sources":["/Users/manuel/digipost/Pers_repos/stories_viewer/src/containers/stories-table.js"],"names":["React","Component","connect","fetchDataTopStories","Link","loading_icon","StoriesTable","props","state","isLoading","storiesToShow","stories","orderedStories","bubbleSort","bind","renderStories","sessionStorage","getItem","unorderedStories","recordedOrderedStories","JSON","parse","recordedUnorderedStories","setState","prevProps","prevState","selectedStories","slice","setItem","stringify","unsortedArray","swapp","n","length","x","i","score","temp","map","story","id","title","author","karma","time","pathname","hasError","mapStateToProps","topStories","storiesHaveError","storiesAreLoading","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchDataTopStories } from '../actions/stories';\nimport { Link } from 'react-router-dom';\nimport loading_icon from '../assets/loading.webp';\n\nimport '../styles/StoriesTable.css';\n\nclass StoriesTable extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isLoading: true,\n            storiesToShow: this.props.stories,\n            orderedStories: []\n        }\n        this.bubbleSort = this.bubbleSort.bind(this);\n        this.renderStories = this.renderStories.bind(this);\n    }\n\n    componentDidMount() {\n        let orderedStories = sessionStorage.getItem('orderedStories');\n        let unorderedStories = sessionStorage.getItem('unorderedStories');\n\n        if (orderedStories !== null) {\n            let recordedOrderedStories = JSON.parse(orderedStories);\n            let recordedUnorderedStories = JSON.parse(unorderedStories);\n            this.setState({\n                isLoading: false,\n                storiesToShow: recordedUnorderedStories,\n                orderedStories: recordedOrderedStories\n            });\n        }\n\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevProps.stories !== this.props.stories && this.props.stories) {\n            this.props.fetchDataTopStories(this.props.stories);\n        }\n\n        if (prevProps.selectedStories !== this.props.selectedStories && this.props.selectedStories) {\n            this.setState({ storiesToShow: this.props.selectedStories });\n        }\n        if (prevState.storiesToShow !== this.state.storiesToShow) {\n            let unorderedStories = this.state.storiesToShow.slice(0);\n            let orderedStories = this.bubbleSort(unorderedStories);\n            sessionStorage.setItem('unorderedStories', JSON.stringify(this.state.storiesToShow));\n            sessionStorage.setItem('orderedStories', JSON.stringify(orderedStories));\n            this.setState({ orderedStories });\n        }\n    }\n\n    bubbleSort(unsortedArray) {\n        let swapp;\n        let n = unsortedArray.length - 1;\n        let x = unsortedArray;\n        do {\n            swapp = false;\n            for (let i = 0; i < n; i++) {\n                if (x[i].score < x[i + 1].score) {\n                    let temp = x[i];\n                    x[i] = x[i + 1];\n                    x[i + 1] = temp;\n                    swapp = true;\n                }\n            }\n            n--;\n        } while (swapp);\n        return x;\n    }\n\n    renderStories() {\n        let stories = this.state.orderedStories;\n\n        return (\n            stories.map((story) => {\n                return (\n                    <tr key={story.id}>\n                        <td className='table-story-cell table-story-cell-name'>{story.title}</td>\n                        <td className='table-story-cell'>{story.score}</td>\n                        <td className='table-story-cell'>{story.author}</td>\n                        <td className='table-story-cell'>{story.karma}</td>\n                        <td className='table-story-cell'>{story.time}</td>\n                        <td className='table-story-cell'>\n                            <Link\n                                className='main-buttons-container'\n                                to={{\n                                    pathname: '/details',\n                                    state: {\n                                        story: story\n                                    }\n                                }}\n                            >\n                                <button className='button button-details'>\n                                    details\n                                    <i className='right-arrow'>&#62;</i>\n                                </button>\n                            </Link>\n\n                        </td>\n                    </tr >\n                );\n            })\n        );\n    }\n\n    render() {\n        if (this.props.hasError) {\n            return (\n                <p className='error-text'>Sorry!!! There was an error loading the items</p>\n            )\n        }\n        if (this.props.isLoading) {\n            return (\n                <div>\n                    <img src={loading_icon} alt='loading' width='85px' height='85px' />\n                    <p className='loading-text'>Loading…</p>\n                </div>\n            )\n        }\n        return (\n            <div className='stories-main-container'>\n                <table className='table-container' cellSpacing='0'>\n                    <thead className='table-header'>\n                        <tr>\n                            <th className='header-cell'>Title</th>\n                            <th className='header-cell'>Score</th>\n                            <th className='header-cell'>Author</th>\n                            <th className='header-cell'>Author´s Karma</th>\n                            <th className='header-cell'>Date</th>\n                            <th className='header-cell'>Go to</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {this.renderStories()}\n                    </tbody>\n                </table>\n                <Link\n                    className='main-buttons-container'\n                    to={{\n                        pathname: '/chart',\n                        state: {\n                            stories: this.state.storiesToShow\n                        }\n                    }}\n                >\n                    <button className='button button-chart'>\n                        Show chart\n                    </button>\n                </Link>\n            </div >\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        stories: state.stories,\n        selectedStories: state.topStories,\n        hasError: state.storiesHaveError,\n        isLoading: state.storiesAreLoading\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        fetchDataTopStories: (stories) => dispatch(fetchDataTopStories(stories)),\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StoriesTable);"]},"metadata":{},"sourceType":"module"}