{"ast":null,"code":"import axios from 'axios';\nimport convertTime from '../functions/convert-time';\nexport var STORIES_HAVE_ERROR = 'STORIES_HAVE_ERROR';\nexport var STORIES_ARE_LOADING = 'STORIES_ARE_LOADING';\nexport var STORIES_FETCH_DATA_SUCCESS = 'STORIES_FETCH_DATA_SUCCESS';\nexport var TOP_STORIES_FETCH_DATA_SUCCESS = 'TOP_STORIES_FETCH_DATA_SUCCESS';\nexport function storiesHaveError(bool) {\n  return {\n    type: STORIES_HAVE_ERROR,\n    hasError: bool\n  };\n}\nexport function storiesAreLoading(bool) {\n  return {\n    type: STORIES_ARE_LOADING,\n    isLoading: bool\n  };\n}\nexport function storiesFetchDataSuccess(stories) {\n  return {\n    type: STORIES_FETCH_DATA_SUCCESS,\n    payload: stories\n  };\n}\nexport function fetchDataTopStoriesSuccess(selectedStories) {\n  return {\n    type: TOP_STORIES_FETCH_DATA_SUCCESS,\n    payload: selectedStories\n  };\n}\nexport function fetchTopStories() {\n  var url = 'https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty';\n  return function (dispatch) {\n    dispatch(storiesAreLoading(true));\n    axios.get(url).then(function (response) {\n      if (response.status !== 200) {\n        throw Error(response.statusText);\n      }\n\n      dispatch(storiesAreLoading(false));\n      return response;\n    }).then(function (response) {\n      return dispatch(storiesFetchDataSuccess(response.data));\n    }).catch(function () {\n      return dispatch(storiesHaveError(true));\n    });\n  };\n}\nexport function fetchDataTopStories(stories) {\n  var rootUrl = 'https://hacker-news.firebaseio.com/v0/';\n  var selectedStories = [{}, {}, {}, {}, {}, {}, {}, {}, {}, {}];\n  return function (dispatch) {\n    dispatch(storiesAreLoading(true));\n    selectedStories.forEach(function (story) {\n      var ramdomStory = stories[Math.floor(Math.random() * stories.length)];\n      var fullStoryUrl = \"\".concat(rootUrl, \"item/\").concat(ramdomStory, \".json?print=pretty\");\n      axios.get(fullStoryUrl).then(function (response) {\n        if (response.status !== 200) {\n          throw Error(response.statusText);\n        }\n\n        return response;\n      }).then(function (response) {\n        story.id = response.data.id;\n        story.url = response.data.url;\n        story.title = response.data.title;\n        story.score = response.data.score;\n        story.author = response.data.by;\n        story.time = convertTime(response.data.time);\n        var fullAuthorUrl = \"\".concat(rootUrl, \"user/\").concat(response.data.by, \".json?print=pretty\");\n        axios.get(fullAuthorUrl).then(function (response) {\n          story.karma = response.data.karma;\n        });\n      }).catch(function () {\n        return dispatch(storiesHaveError(true));\n      });\n    });\n    setTimeout(function () {\n      dispatch(fetchDataTopStoriesSuccess(selectedStories));\n      dispatch(storiesAreLoading(false));\n    }, 3000);\n  };\n}","map":{"version":3,"sources":["/Users/manuel/digipost/Pers_repos/stories_viewer/src/actions/stories.js"],"names":["axios","convertTime","STORIES_HAVE_ERROR","STORIES_ARE_LOADING","STORIES_FETCH_DATA_SUCCESS","TOP_STORIES_FETCH_DATA_SUCCESS","storiesHaveError","bool","type","hasError","storiesAreLoading","isLoading","storiesFetchDataSuccess","stories","payload","fetchDataTopStoriesSuccess","selectedStories","fetchTopStories","url","dispatch","get","then","response","status","Error","statusText","data","catch","fetchDataTopStories","rootUrl","forEach","story","ramdomStory","Math","floor","random","length","fullStoryUrl","id","title","score","author","by","time","fullAuthorUrl","karma","setTimeout"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport convertTime from '../functions/convert-time';\n\nexport const STORIES_HAVE_ERROR = 'STORIES_HAVE_ERROR';\nexport const STORIES_ARE_LOADING = 'STORIES_ARE_LOADING';\nexport const STORIES_FETCH_DATA_SUCCESS = 'STORIES_FETCH_DATA_SUCCESS';\nexport const TOP_STORIES_FETCH_DATA_SUCCESS = 'TOP_STORIES_FETCH_DATA_SUCCESS';\n\nexport function storiesHaveError(bool) {\n    return {\n        type: STORIES_HAVE_ERROR,\n        hasError: bool\n    };\n}\n\nexport function storiesAreLoading(bool) {\n    return {\n        type: STORIES_ARE_LOADING,\n        isLoading: bool\n    };\n}\n\nexport function storiesFetchDataSuccess(stories) {\n    return {\n        type: STORIES_FETCH_DATA_SUCCESS,\n        payload: stories\n    };\n}\n\nexport function fetchDataTopStoriesSuccess(selectedStories) {\n    return {\n        type: TOP_STORIES_FETCH_DATA_SUCCESS,\n        payload: selectedStories\n    };\n}\n\nexport function fetchTopStories() {\n    const url = 'https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty';\n    return (dispatch) => {\n        dispatch(storiesAreLoading(true));\n        axios.get(url)\n            .then((response) => {\n                if (response.status !== 200) {\n                    throw Error(response.statusText);\n                }\n                dispatch(storiesAreLoading(false));\n                return response;\n            })\n            .then((response) => dispatch(storiesFetchDataSuccess(response.data)))\n            .catch(() => dispatch(storiesHaveError(true)));\n    };\n}\n\nexport function fetchDataTopStories(stories) {\n    let rootUrl = 'https://hacker-news.firebaseio.com/v0/';\n    let selectedStories = [{}, {}, {}, {}, {}, {}, {}, {}, {}, {}];\n\n    return (dispatch) => {\n        dispatch(storiesAreLoading(true));\n\n        selectedStories.forEach((story) => {\n            let ramdomStory = stories[Math.floor(Math.random() * stories.length)];\n            let fullStoryUrl = `${rootUrl}item/${ramdomStory}.json?print=pretty`;\n            axios.get(fullStoryUrl)\n                .then((response) => {\n                    if (response.status !== 200) {\n                        throw Error(response.statusText);\n                    }\n                    return response;\n                })\n                .then((response) => {\n                    story.id = response.data.id;\n                    story.url = response.data.url;\n                    story.title = response.data.title;\n                    story.score = response.data.score;\n                    story.author = response.data.by;\n                    story.time = convertTime(response.data.time);\n                    let fullAuthorUrl = `${rootUrl}user/${response.data.by}.json?print=pretty`;\n                    axios.get(fullAuthorUrl).then((response) => {\n                        story.karma = response.data.karma;\n                    })\n                })\n                .catch(() => dispatch(storiesHaveError(true)));\n\n\n        });\n\n        setTimeout(() => {\n            dispatch(fetchDataTopStoriesSuccess(selectedStories));\n            dispatch(storiesAreLoading(false));\n        }, 3000);\n    };\n}\n"]},"metadata":{},"sourceType":"module"}